# ğŸ”§ 1. **address åŸºç¡€å±æ€§**

|åŠŸèƒ½|ç¤ºä¾‹|ä½œç”¨|
|---|---|---|
|æŸ¥è¯¢ä½™é¢|`addr.balance`|æŸ¥çœ‹è¯¥åœ°å€çš„ ETH æ•°é‡ï¼ˆå•ä½ weiï¼‰|
|æŸ¥çœ‹ä»£ç |`addr.code`|è·å–åœ°å€çš„å­—èŠ‚ç ï¼ˆåˆçº¦æ‰æœ‰ï¼‰|
|æŸ¥çœ‹ä»£ç å¤§å°|`addr.code.length`|ç”¨æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯åˆçº¦|
|ä»£ç å“ˆå¸Œ|`addr.codehash`|åˆ¤æ–­åˆçº¦ç±»å‹ / æ˜¯å¦åˆçº¦|

---

# ğŸ”§ 2. **è½¬è´¦ï¼ˆéœ€è¦ address payableï¼‰**
**from åœ°å€**ï¼šè°ƒç”¨ `transfer` çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ **å½“å‰åˆçº¦åœ°å€**
**to åœ°å€**ï¼š`recipient`ï¼Œæ¥æ”¶ ETH çš„åœ°å€

| æ–¹æ³•          | ç¤ºä¾‹                                                     | ç‰¹ç‚¹                         |
| ----------- | ------------------------------------------------------ | -------------------------- |
| transfer    | `payable(addr).transfer(1 ether)`                      | è‡ªåŠ¨ revertï¼Œgas é™åˆ¶ 2300ï¼ˆä¸æ¨èï¼‰ |
| send        | `payable(addr).send(1 ether)`                          | è¿”å› boolï¼Œä¸ä¼šè‡ªåŠ¨ revert        |
| call (ç°ä»£æ¨è) | `(bool ok,) = payable(addr).call{value: 1 ether}("");` | æœ€å®‰å…¨çµæ´»ï¼Œæ—  gas é™åˆ¶             |

---

# ğŸ”§ 3. **ä½çº§è°ƒç”¨ï¼ˆä¸åˆçº¦äº¤äº’ï¼‰**

|æ–¹æ³•|ç¤ºä¾‹|ç”¨é€”|
|---|---|---|
|call|`(bool ok, bytes memory data) = addr.call(data);`|è°ƒç”¨ä»»æ„å‡½æ•°ï¼Œå¯å¸¦ ETHï¼ˆæœ€å¸¸ç”¨ï¼‰|
|staticcall|`addr.staticcall(data)`|åªè¯»è°ƒç”¨ï¼Œç¦æ­¢ä¿®æ”¹çŠ¶æ€|
|delegatecall|`addr.delegatecall(data)`|ä»£ç†è°ƒç”¨ï¼Œç”¨è°ƒç”¨è€…çš„ storage|

âš ï¸ delegatecall **å±é™©**ï¼Œç”¨äºå¯å‡çº§åˆçº¦ã€æ–°æ‰‹æ…ç”¨ã€‚


# ğŸ“Œ 5. **address çš„å¸¸è§æ„é€ æ–¹å¼ï¼ˆæœ€é‡è¦ï¼‰**
## âœ” **æ–¹å¼ 1ï¼šé€šè¿‡å˜é‡æˆ–å‚æ•°è·å¾—ï¼ˆæœ€å¸¸è§ï¼‰**æˆ–è€…ç›´æ¥å†™16è¿›åˆ¶æ•°å­—

`address owner = msg.sender;`
## âœ” **æ–¹å¼ 3ï¼šä»åˆçº¦ç±»å‹å¼ºåˆ¶è½¬æ¢**

å¦‚æœä½ æœ‰ä¸€ä¸ªåˆçº¦ç±»å‹ï¼Œæ¯”å¦‚ï¼š

`interface IToken {} IToken token = IToken(0x123...);`

ä½ å¯ä»¥ï¼š

`address tokenAddress = address(token);`

### æ–¹å¼4ï¼špayable è½¬æ¢

| æ–¹æ³•        | ç¤ºä¾‹                                                                         | è¯´æ˜                        |
| --------- | -------------------------------------------------------------------------- | ------------------------- |
| è½¬ä¸ºå¯æ”¶å‘ ETH | `address payable p = payable(msg.sender);`                                 | è®©åœ°å€èƒ½æ¥æ”¶ ETH æˆ–ç”¨ call å‘é€ ETH |


### âœ” æ–¹å¼ 6ï¼šé€šè¿‡ CREATE2 å…¬å¼é¢„æµ‹æœªæ¥åˆçº¦åœ°å€

`predictedAddress = address(uint160(uint(keccak256(abi.encodePacked(     bytes1(0xff),           // CREATE2 å›ºå®šå‰ç¼€     address(this),          // éƒ¨ç½²è€…åœ°å€ï¼ˆcreatorAddressï¼‰     salt,                   // è‡ªå®šä¹‰ salt     keccak256(type(Pair).creationCode) // åˆçº¦å­—èŠ‚ç  initcode )))));`

#### è§£é‡Šï¼š

1. **`bytes1(0xff)`**
    
    - å›ºå®šå¸¸é‡ï¼Œç”¨äºåŒºåˆ† CREATE2 ä¸æ™®é€š CREATE
        
2. **`address(this)`**
    
    - å½“å‰åˆçº¦åœ°å€ï¼Œå³éƒ¨ç½²è€…åœ°å€ï¼ˆCreatorAddressï¼‰
        
3. **`salt`**
    
    - 32 å­—èŠ‚è‡ªå®šä¹‰å€¼ï¼Œå¯ç”¨æ¥ç”Ÿæˆä¸åŒçš„åˆçº¦åœ°å€
        
4. **`keccak256(type(Pair).creationCode)`**
    
    - æ–°åˆçº¦çš„åˆå§‹åŒ–å­—èŠ‚ç ï¼ˆinitcodeï¼‰
        
5. **`uint160(uint(...))` + `address(...)`**
    
    - å› ä¸º keccak256 è¾“å‡º 32 å­—èŠ‚ï¼Œè€Œ address åªæœ‰ 20 å­—èŠ‚ï¼Œæ‰€ä»¥å…ˆè½¬ä¸º uintï¼Œå†è½¬ä¸º address